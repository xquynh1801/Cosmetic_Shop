<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{/layout/layout :: main-fragment(
                                                ~{:: title},
                                                'short-header',
                                                ~{:: #css-resources},
                                                ~{:: #js-resources},
                                                ~{:: #main-content}
                                               )}">

<head>
    <title th:text="${product.ten}"></title>

    <th:block id="css-resources">
        <link rel="stylesheet" type="text/css" th:href="@{/css/components/header.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/components/products.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/components/index/product-showcase.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/components/product-details/product-info.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/components/product-details/size-choose.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/components/product-details/size-guide-table.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/except-home-page.css}"/>
        <link rel="stylesheet" type="text/css" th:href="@{/css/product-details.css}"/>
    </th:block>
</head>
<body>
<main id="main-content">
    <!-- Breadcrum Section-->
    <div class="breadcrumb container">
        <a class="previous-page" href="/">Trang chủ</a>
        <i class="fas fa-chevron-right arrow"></i>
        <a class="previous-page" href="/san-pham">Sản phẩm</a>
        <i class="fas fa-chevron-right arrow"></i>
        <span class="current-page" th:text="${product.ten}"></span>
    </div>

    <!-- Products Content Section-->
    <section class="product-content-wrapper container">
        <div class="common-info">
            <div class="name" th:text="${product.ten}"></div>
        </div>
        <div class="main-info row">
            <div class="product-image col-lg-6">
                <div class="slider slider-for">
                    <div class="img-zoom-container">
                        <img class="img-fluid" th:src="${product.image[0]}" alt="image-1"/>
                    </div>
                </div>
                <div class="slider slider-nav">
                    <div th:each="img, index : ${product.image}">
                        <img class="img-fluid" th:src="${img}" th:alt="'img-'+${index.index}"/>
                    </div>
                </div>
            </div>
            <div class="product-info col-lg-6">
                <div class="title h3">Mô tả sản phẩm</div>
                <div class="desc" th:utext="${product.mota}"></div>
                <div class="desc-sub">
                    <div style="display: flex; align-items: center;">
                        <span class="desc-sub-title" style="margin-right: 5px;">Giá:</span>
                        <p class="price">
                            <span class="text-price" th:text="${product.loaiSps[0].gia}" id="giaSanPham"></span> &#x20AB;
                        </p>
                    </div>
                </div>
                <div class="desc-sub">
                    <span class="desc-sub-title">Hãng: </span>
                    <span th:text="${product.nhanHieu.name}"></span>
                </div>
                <div class="desc-sub">
                    <span class="desc-sub-title">Đã bán: </span>
                    <span th:text="${product.tong_ban}"></span>
                </div>
                <div class="desc-sub">
                    <span class="desc-sub-title">Loại sản phẩm: </span>
                    <select id="loaiSP" name="loaiSP">
                        <option th:each="loaiSP : ${product.loaiSps}" th:value="${loaiSP.id}" th:data-gia="${loaiSP.gia}" th:text="${loaiSP.tenloai}"></option>
                    </select>
                </div>
                <div class="desc-sub">
                    <div style="display: flex; align-items: center;">
                        <span class="desc-sub-title" style="margin-right: 5px;">Số lượng:</span>
                        <div class="quantity-input">
                            <button id="decrement" onclick="decrementQuantity()">-</button>
                            <input type="text" id="quantity" value="1" style="text-align: center; width: 40px; height: 30px;">
                            <button id="increment" onclick="incrementQuantity()">+</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="break-section container-fluid"></div>
</main>

<th:block id="js-resources">
    <script th:src="@{/script/except-home-page.js}"></script>
    <script th:src="@{/script/size-choose.js}"></script>
    <script th:src="@{/script/product-details.js}"></script>
    <script th:src="@{/vendor/zoom-master/jquery.zoom.min.js}" type="text/javascript"></script>
    <script th:inline="javascript">
        // Lắng nghe sự kiện thay đổi của ComboBox
        document.getElementById("loaiSP").addEventListener("change", function () {
            var selectedOption = this.options[this.selectedIndex];
            var giaSanPham = selectedOption.getAttribute("data-gia"); // Lấy giá từ thuộc tính data-gia của option
            document.getElementById("giaSanPham").textContent = giaSanPham; // Cập nhật giá
        });

        // Xử lý sự kiện giảm số lượng
        function decrementQuantity() {
            var quantityInput = document.getElementById("quantity");
            var currentQuantity = parseInt(quantityInput.value);
            if (currentQuantity > 1) {
                quantityInput.value = currentQuantity - 1;
            }
        }

        // Xử lý sự kiện tăng số lượng
        function incrementQuantity() {
            var quantityInput = document.getElementById("quantity");
            var currentQuantity = parseInt(quantityInput.value);
            quantityInput.value = currentQuantity + 1;
        }
    </script>
</th:block>
</body>
</html>






